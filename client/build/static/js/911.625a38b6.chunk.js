"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[911],{16467:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(80045),s=a(9950);const o=["title","titleId"];function l(e,t){let{title:a,titleId:l}=e,n=(0,r.A)(e,o);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const n=s.forwardRef(l)},57491:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(80045),s=a(9950);const o=["title","titleId"];function l(e,t){let{title:a,titleId:l}=e,n=(0,r.A)(e,o);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const n=s.forwardRef(l)},64725:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(80045),s=a(9950);const o=["title","titleId"];function l(e,t){let{title:a,titleId:l}=e,n=(0,r.A)(e,o);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const n=s.forwardRef(l)},76911:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var r=a(89379),s=a(9950),o=a(57491),l=a(16467),n=a(80045);const c=["title","titleId"];function i(e,t){let{title:a,titleId:r}=e,o=(0,n.A)(e,c);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},o),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const d=s.forwardRef(i);var u=a(64725),x=a(82715);const p=new class{constructor(){this.apiClient={get:(e,t)=>x.A.get("/todos".concat(e),t),post:(e,t,a)=>x.A.post("/todos".concat(e),t,a),put:(e,t,a)=>x.A.put("/todos".concat(e),t,a),patch:(e,t,a)=>x.A.patch("/todos".concat(e),t,a),delete:(e,t)=>x.A.delete("/todos".concat(e),t)}}async getTodos(e){try{const t=await this.apiClient.get("/",{params:e});return t.data||t}catch(a){var t;throw new Error((null===(t=a.data)||void 0===t?void 0:t.message)||"\u83b7\u53d6\u5f85\u529e\u4e8b\u9879\u5931\u8d25")}}async createTodo(e){try{const t=await this.apiClient.post("/",e);return t.data||t}catch(a){var t;throw new Error((null===(t=a.data)||void 0===t?void 0:t.message)||"\u521b\u5efa\u5f85\u529e\u4e8b\u9879\u5931\u8d25")}}async updateTodo(e,t){try{const a=await this.apiClient.put("/".concat(e),t);return a.data||a}catch(r){var a;throw new Error((null===(a=r.data)||void 0===a?void 0:a.message)||"\u66f4\u65b0\u5f85\u529e\u4e8b\u9879\u5931\u8d25")}}async toggleTodo(e){try{const t=await this.apiClient.patch("/".concat(e,"/toggle"),{});return t.data||t}catch(a){var t;throw new Error((null===(t=a.data)||void 0===t?void 0:t.message)||"\u5207\u6362\u72b6\u6001\u5931\u8d25")}}async deleteTodo(e){try{const t=await this.apiClient.delete("/".concat(e));return t.data||t}catch(a){var t;throw new Error((null===(t=a.data)||void 0===t?void 0:t.message)||"\u5220\u9664\u5f85\u529e\u4e8b\u9879\u5931\u8d25")}}async deleteCompleted(){try{const e=await this.apiClient.delete("/completed/batch");return e.data||e}catch(t){var e;throw new Error((null===(e=t.data)||void 0===e?void 0:e.message)||"\u6279\u91cf\u5220\u9664\u5931\u8d25")}}async getTodoStats(){try{const e=await this.apiClient.get("/stats");return e.data||e}catch(t){var e;throw new Error((null===(e=t.data)||void 0===e?void 0:e.message)||"\u83b7\u53d6\u7edf\u8ba1\u4fe1\u606f\u5931\u8d25")}}};var h=a(44414);const m=e=>{let{className:t=""}=e;const[a,n]=(0,s.useState)([]),[c,i]=(0,s.useState)(!1),[x,m]=(0,s.useState)(""),[g,v]=(0,s.useState)("all"),[y,b]=(0,s.useState)(""),[j,w]=(0,s.useState)(""),[f,N]=(0,s.useState)(!1),[A,C]=(0,s.useState)(null),[k,E]=(0,s.useState)({current:1,total:1,totalItems:0}),[L,S]=(0,s.useState)({title:"",description:"",priority:"\u4e2d",category:"\u5176\u4ed6",dueDate:"",tags:[]}),D=async()=>{try{i(!0);const e={page:k.current,limit:10,sortBy:"createdAt",sortOrder:"desc"};"pending"===g&&(e.completed=!1),"completed"===g&&(e.completed=!0),y&&(e.priority=y),j&&(e.category=j);const t=await p.getTodos(e);n(t.data.todos),E(t.data.pagination)}catch(e){console.error("\u83b7\u53d6\u5f85\u529e\u4e8b\u9879\u5931\u8d25:",e)}finally{i(!1)}};(0,s.useEffect)(()=>{D()},[g,y,j,k.current]);const T=e=>{switch(e){case"\u9ad8":return"text-red-600 bg-red-50";case"\u4e2d":return"text-yellow-600 bg-yellow-50";case"\u4f4e":return"text-green-600 bg-green-50";default:return"text-gray-600 bg-gray-50"}},I=e=>{switch(e){case"\u5de5\u4f5c":return"text-blue-600 bg-blue-50";case"\u5b66\u4e60":return"text-purple-600 bg-purple-50";case"\u751f\u6d3b":return"text-green-600 bg-green-50";default:return"text-gray-600 bg-gray-50"}};return(0,h.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 ".concat(t),children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,h.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\u5f85\u529e\u6e05\u5355"}),(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsxs)("button",{onClick:()=>N(!f),className:"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,h.jsx)(o.A,{className:"h-4 w-4 mr-1"}),"\u6dfb\u52a0"]}),(0,h.jsxs)("button",{onClick:async()=>{if(window.confirm("\u786e\u5b9a\u8981\u5220\u9664\u6240\u6709\u5df2\u5b8c\u6210\u7684\u5f85\u529e\u4e8b\u9879\u5417\uff1f"))try{await p.deleteCompleted(),D()}catch(e){console.error("\u6279\u91cf\u5220\u9664\u5931\u8d25:",e)}},className:"flex items-center px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[(0,h.jsx)(l.A,{className:"h-4 w-4 mr-1"}),"\u6e05\u7406\u5df2\u5b8c\u6210"]})]})]}),(0,h.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)(d,{className:"h-4 w-4 text-gray-500"}),(0,h.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\u7b5b\u9009:"})]}),(0,h.jsxs)("select",{value:g,onChange:e=>v(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[(0,h.jsx)("option",{value:"all",children:"\u5168\u90e8"}),(0,h.jsx)("option",{value:"pending",children:"\u672a\u5b8c\u6210"}),(0,h.jsx)("option",{value:"completed",children:"\u5df2\u5b8c\u6210"})]}),(0,h.jsxs)("select",{value:y,onChange:e=>b(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[(0,h.jsx)("option",{value:"",children:"\u6240\u6709\u4f18\u5148\u7ea7"}),(0,h.jsx)("option",{value:"\u9ad8",children:"\u9ad8\u4f18\u5148\u7ea7"}),(0,h.jsx)("option",{value:"\u4e2d",children:"\u4e2d\u4f18\u5148\u7ea7"}),(0,h.jsx)("option",{value:"\u4f4e",children:"\u4f4e\u4f18\u5148\u7ea7"})]}),(0,h.jsxs)("select",{value:j,onChange:e=>w(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[(0,h.jsx)("option",{value:"",children:"\u6240\u6709\u5206\u7c7b"}),(0,h.jsx)("option",{value:"\u5de5\u4f5c",children:"\u5de5\u4f5c"}),(0,h.jsx)("option",{value:"\u5b66\u4e60",children:"\u5b66\u4e60"}),(0,h.jsx)("option",{value:"\u751f\u6d3b",children:"\u751f\u6d3b"}),(0,h.jsx)("option",{value:"\u5176\u4ed6",children:"\u5176\u4ed6"})]})]}),f&&(0,h.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,h.jsx)("input",{type:"text",placeholder:"\u4efb\u52a1\u6807\u9898",value:L.title,onChange:e=>S((0,r.A)((0,r.A)({},L),{},{title:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md"}),(0,h.jsx)("input",{type:"text",placeholder:"\u4efb\u52a1\u63cf\u8ff0",value:L.description,onChange:e=>S((0,r.A)((0,r.A)({},L),{},{description:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md"}),(0,h.jsxs)("select",{value:L.priority,onChange:e=>S((0,r.A)((0,r.A)({},L),{},{priority:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md",children:[(0,h.jsx)("option",{value:"\u4f4e",children:"\u4f4e\u4f18\u5148\u7ea7"}),(0,h.jsx)("option",{value:"\u4e2d",children:"\u4e2d\u4f18\u5148\u7ea7"}),(0,h.jsx)("option",{value:"\u9ad8",children:"\u9ad8\u4f18\u5148\u7ea7"})]}),(0,h.jsxs)("select",{value:L.category,onChange:e=>S((0,r.A)((0,r.A)({},L),{},{category:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md",children:[(0,h.jsx)("option",{value:"\u5de5\u4f5c",children:"\u5de5\u4f5c"}),(0,h.jsx)("option",{value:"\u5b66\u4e60",children:"\u5b66\u4e60"}),(0,h.jsx)("option",{value:"\u751f\u6d3b",children:"\u751f\u6d3b"}),(0,h.jsx)("option",{value:"\u5176\u4ed6",children:"\u5176\u4ed6"})]}),(0,h.jsx)("input",{type:"datetime-local",value:L.dueDate,onChange:e=>S((0,r.A)((0,r.A)({},L),{},{dueDate:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md"})]}),(0,h.jsxs)("div",{className:"flex justify-end space-x-2 mt-4",children:[(0,h.jsx)("button",{onClick:()=>N(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"\u53d6\u6d88"}),(0,h.jsx)("button",{onClick:async()=>{if(L.title.trim())try{await p.createTodo((0,r.A)((0,r.A)({},L),{},{dueDate:L.dueDate||void 0})),S({title:"",description:"",priority:"\u4e2d",category:"\u5176\u4ed6",dueDate:"",tags:[]}),N(!1),D()}catch(e){console.error("\u521b\u5efa\u5f85\u529e\u4e8b\u9879\u5931\u8d25:",e)}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"\u6dfb\u52a0\u4efb\u52a1"})]})]}),(0,h.jsx)("div",{className:"space-y-3",children:c?(0,h.jsxs)("div",{className:"text-center py-8",children:[(0,h.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,h.jsx)("p",{className:"text-gray-500 mt-2",children:"\u52a0\u8f7d\u4e2d..."})]}):0===a.length?(0,h.jsx)("div",{className:"text-center py-8",children:(0,h.jsx)("p",{className:"text-gray-500",children:"\u6682\u65e0\u5f85\u529e\u4e8b\u9879"})}):a.map(e=>(0,h.jsx)("div",{className:"p-4 border rounded-lg transition-all ".concat(e.completed?"bg-gray-50 border-gray-200":"bg-white border-gray-300 hover:border-blue-300"),children:(0,h.jsxs)("div",{className:"flex items-start justify-between",children:[(0,h.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,h.jsx)("button",{onClick:()=>(async e=>{try{await p.toggleTodo(e),D()}catch(t){console.error("\u5207\u6362\u72b6\u6001\u5931\u8d25:",t)}})(e._id),className:"mt-1 p-1 rounded-full transition-colors ".concat(e.completed?"bg-green-600 text-white":"border-2 border-gray-300 hover:border-green-500"),children:e.completed&&(0,h.jsx)(u.A,{className:"h-3 w-3"})}),(0,h.jsxs)("div",{className:"flex-1",children:[(0,h.jsx)("h3",{className:"font-medium ".concat(e.completed?"text-gray-500 line-through":"text-gray-800"),children:e.title}),e.description&&(0,h.jsx)("p",{className:"text-sm mt-1 ".concat(e.completed?"text-gray-400":"text-gray-600"),children:e.description}),(0,h.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,h.jsxs)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(T(e.priority)),children:[e.priority,"\u4f18\u5148\u7ea7"]}),(0,h.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(I(e.category)),children:e.category}),e.dueDate&&(0,h.jsxs)("span",{className:"text-xs text-gray-500",children:["\u622a\u6b62: ",new Date(e.dueDate).toLocaleDateString()]})]})]})]}),(0,h.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u4e2a\u5f85\u529e\u4e8b\u9879\u5417\uff1f"))try{await p.deleteTodo(e),D()}catch(t){console.error("\u5220\u9664\u5f85\u529e\u4e8b\u9879\u5931\u8d25:",t)}})(e._id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:(0,h.jsx)(l.A,{className:"h-4 w-4"})})]})},e._id))}),k.total>1&&(0,h.jsx)("div",{className:"flex justify-center mt-6",children:(0,h.jsx)("div",{className:"flex space-x-2",children:Array.from({length:k.total},(e,t)=>t+1).map(e=>(0,h.jsx)("button",{onClick:()=>E((0,r.A)((0,r.A)({},k),{},{current:e})),className:"px-3 py-2 rounded-md transition-colors ".concat(e===k.current?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e},e))})})]})}}}]);