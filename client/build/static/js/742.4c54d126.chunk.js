"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[742],{3742:(e,t,r)=>{r.r(t),r.d(t,{default:()=>x});var a=r(89379),s=r(9950),n=r(18838),i=r(64725),l=r(36923),o=r(57491),c=r(16467),d=r(48605),m=r(44414);const x=e=>{let{className:t=""}=e;const[r,x]=(0,s.useState)([]),[u,h]=(0,s.useState)([]),[p,g]=(0,s.useState)(!1),[v,y]=(0,s.useState)(!1),[j,b]=(0,s.useState)("active"),[w,N]=(0,s.useState)(""),[f,C]=(0,s.useState)(""),[A,k]=(0,s.useState)({current:1,total:1,totalItems:0}),[E,R]=(0,s.useState)({title:"",description:"",reminderTime:"",type:"\u4e00\u6b21\u6027",priority:"\u4e2d",category:"\u5de5\u4f5c"}),T=(0,s.useCallback)(async()=>{try{g(!0);const e={page:A.current,limit:10,sortBy:"reminderTime",sortOrder:"asc"};"active"===j&&(e.isActive=!0),"completed"===j&&(e.isCompleted=!0),w&&(e.type=w);const t=await d.A.getReminders(e);x(t.data.reminders),k(t.data.pagination)}catch(e){console.error("\u83b7\u53d6\u63d0\u9192\u4e8b\u9879\u5931\u8d25:",e)}finally{g(!1)}},[j,w,f,A.current]),S=(0,s.useCallback)(async()=>{try{const e=await d.A.getUpcomingReminders();h(e.data)}catch(e){console.error("\u83b7\u53d6\u5373\u5c06\u5230\u6765\u7684\u63d0\u9192\u5931\u8d25:",e)}},[]);(0,s.useEffect)(()=>{T(),S()},[T,S]);const L=async e=>{try{await d.A.completeReminder(e),T(),S()}catch(t){console.error("\u5b8c\u6210\u63d0\u9192\u5931\u8d25:",t)}},I=async(e,t)=>{try{await d.A.snoozeReminder(e,t),T(),S()}catch(r){console.error("\u5ef6\u8fdf\u63d0\u9192\u5931\u8d25:",r)}},_=e=>{switch(e){case"\u9ad8":return"text-red-600 bg-red-50 border-red-200";case"\u4e2d":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"\u4f4e":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},D=e=>{switch(e){case"\u6bcf\u65e5":return"\ud83d\udcc5";case"\u6bcf\u5468":return"\ud83d\udcc6";case"\u6bcf\u6708":return"\ud83d\uddd3\ufe0f";case"\u4e00\u6b21\u6027":return"\ud83d\udccb";default:return"\ud83d\udccc"}},z=e=>{const t=new Date(e),r=new Date,a=t.getTime()-r.getTime(),s=Math.floor(a/36e5),n=Math.floor(s/24);if(a<0)return"\u5df2\u8fc7\u671f";if(s<1){const e=Math.floor(a/6e4);return"".concat(e,"\u5206\u949f\u540e")}return s<24?"".concat(s,"\u5c0f\u65f6\u540e"):n<7?"".concat(n,"\u5929\u540e"):t.toLocaleDateString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},B=e=>new Date(e)<new Date;return(0,m.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 ".concat(t),children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,m.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\u63d0\u9192\u4e8b\u9879\u4e2d\u5fc3"}),(0,m.jsxs)("button",{onClick:()=>y(!v),className:"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,m.jsx)(o.A,{className:"h-4 w-4 mr-1"}),"\u6dfb\u52a0\u63d0\u9192"]})]}),u.length>0&&(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold text-gray-700 mb-3 flex items-center",children:[(0,m.jsx)(n.A,{className:"h-5 w-5 mr-2 text-orange-500"}),"\u5373\u5c06\u5230\u6765\u7684\u63d0\u9192"]}),(0,m.jsx)("div",{className:"space-y-2",children:u.slice(0,3).map(e=>(0,m.jsx)("div",{className:"p-3 rounded-lg border-l-4 ".concat(B(e.reminderTime)?"bg-red-50 border-red-400":"bg-orange-50 border-orange-400"),children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)("span",{className:"text-lg",children:D(e.type)}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{className:"font-medium text-gray-800",children:e.title}),(0,m.jsx)("p",{className:"text-sm text-gray-600",children:z(e.reminderTime)})]})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)("button",{onClick:()=>I(e._id,15),className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-700 rounded hover:bg-yellow-200 transition-colors",children:"\u5ef6\u8fdf15\u5206\u949f"}),(0,m.jsx)("button",{onClick:()=>L(e._id),className:"px-2 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200 transition-colors",children:"\u5b8c\u6210"})]})]})},e._id))})]}),(0,m.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,m.jsx)("div",{className:"flex items-center space-x-2",children:(0,m.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\u7b5b\u9009:"})}),(0,m.jsxs)("select",{value:j,onChange:e=>b(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[(0,m.jsx)("option",{value:"all",children:"\u5168\u90e8"}),(0,m.jsx)("option",{value:"active",children:"\u6d3b\u8dc3"}),(0,m.jsx)("option",{value:"completed",children:"\u5df2\u5b8c\u6210"})]}),(0,m.jsxs)("select",{value:w,onChange:e=>N(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[(0,m.jsx)("option",{value:"",children:"\u6240\u6709\u7c7b\u578b"}),(0,m.jsx)("option",{value:"\u4e00\u6b21\u6027",children:"\u4e00\u6b21\u6027"}),(0,m.jsx)("option",{value:"\u6bcf\u65e5",children:"\u6bcf\u65e5"}),(0,m.jsx)("option",{value:"\u6bcf\u5468",children:"\u6bcf\u5468"}),(0,m.jsx)("option",{value:"\u6bcf\u6708",children:"\u6bcf\u6708"})]}),(0,m.jsxs)("select",{value:f,onChange:e=>C(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[(0,m.jsx)("option",{value:"",children:"\u6240\u6709\u4f18\u5148\u7ea7"}),(0,m.jsx)("option",{value:"\u9ad8",children:"\u9ad8\u4f18\u5148\u7ea7"}),(0,m.jsx)("option",{value:"\u4e2d",children:"\u4e2d\u4f18\u5148\u7ea7"}),(0,m.jsx)("option",{value:"\u4f4e",children:"\u4f4e\u4f18\u5148\u7ea7"})]})]}),v&&(0,m.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsx)("input",{type:"text",placeholder:"\u63d0\u9192\u6807\u9898",value:E.title,onChange:e=>R((0,a.A)((0,a.A)({},E),{},{title:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md"}),(0,m.jsx)("input",{type:"text",placeholder:"\u63d0\u9192\u63cf\u8ff0",value:E.description,onChange:e=>R((0,a.A)((0,a.A)({},E),{},{description:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md"}),(0,m.jsx)("input",{type:"datetime-local",value:E.reminderTime,onChange:e=>R((0,a.A)((0,a.A)({},E),{},{reminderTime:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md"}),(0,m.jsxs)("select",{value:E.type,onChange:e=>R((0,a.A)((0,a.A)({},E),{},{type:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md",children:[(0,m.jsx)("option",{value:"\u4e00\u6b21\u6027",children:"\u4e00\u6b21\u6027"}),(0,m.jsx)("option",{value:"\u6bcf\u65e5",children:"\u6bcf\u65e5"}),(0,m.jsx)("option",{value:"\u6bcf\u5468",children:"\u6bcf\u5468"}),(0,m.jsx)("option",{value:"\u6bcf\u6708",children:"\u6bcf\u6708"})]}),(0,m.jsxs)("select",{value:E.priority,onChange:e=>R((0,a.A)((0,a.A)({},E),{},{priority:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md",children:[(0,m.jsx)("option",{value:"\u4f4e",children:"\u4f4e\u4f18\u5148\u7ea7"}),(0,m.jsx)("option",{value:"\u4e2d",children:"\u4e2d\u4f18\u5148\u7ea7"}),(0,m.jsx)("option",{value:"\u9ad8",children:"\u9ad8\u4f18\u5148\u7ea7"})]}),(0,m.jsxs)("select",{value:E.category,onChange:e=>R((0,a.A)((0,a.A)({},E),{},{category:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md",children:[(0,m.jsx)("option",{value:"\u5de5\u4f5c",children:"\u5de5\u4f5c"}),(0,m.jsx)("option",{value:"\u5b66\u4e60",children:"\u5b66\u4e60"}),(0,m.jsx)("option",{value:"\u751f\u6d3b",children:"\u751f\u6d3b"}),(0,m.jsx)("option",{value:"\u5065\u5eb7",children:"\u5065\u5eb7"}),(0,m.jsx)("option",{value:"\u5176\u4ed6",children:"\u5176\u4ed6"})]})]}),(0,m.jsxs)("div",{className:"flex justify-end space-x-2 mt-4",children:[(0,m.jsx)("button",{onClick:()=>y(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"\u53d6\u6d88"}),(0,m.jsx)("button",{onClick:async()=>{if(E.title.trim()&&E.reminderTime)try{await d.A.createReminder(E),R({title:"",description:"",reminderTime:"",type:"\u4e00\u6b21\u6027",priority:"\u4e2d",category:"\u5de5\u4f5c"}),y(!1),T(),S()}catch(e){console.error("\u521b\u5efa\u63d0\u9192\u5931\u8d25:",e)}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"\u6dfb\u52a0\u63d0\u9192"})]})]}),(0,m.jsx)("div",{className:"space-y-3",children:p?(0,m.jsxs)("div",{className:"text-center py-8",children:[(0,m.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,m.jsx)("p",{className:"text-gray-500 mt-2",children:"\u52a0\u8f7d\u4e2d..."})]}):0===r.length?(0,m.jsx)("div",{className:"text-center py-8",children:(0,m.jsx)("p",{className:"text-gray-500",children:"\u6682\u65e0\u63d0\u9192\u4e8b\u9879"})}):r.map(e=>(0,m.jsx)("div",{className:"p-4 border rounded-lg transition-all ".concat(e.isCompleted?"bg-gray-50 border-gray-200":B(e.reminderTime)?"bg-red-50 border-red-300":"bg-white border-gray-300 hover:border-blue-300"),children:(0,m.jsxs)("div",{className:"flex items-start justify-between",children:[(0,m.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,m.jsx)("span",{className:"text-xl mt-1",children:D(e.type)}),(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,m.jsx)("h3",{className:"font-medium ".concat(e.isCompleted?"text-gray-500 line-through":"text-gray-800"),children:e.title}),(0,m.jsx)("span",{className:"px-2 py-1 text-xs rounded-full border ".concat(_(e.priority)),children:e.priority})]}),e.description&&(0,m.jsx)("p",{className:"text-sm mb-2 ".concat(e.isCompleted?"text-gray-400":"text-gray-600"),children:e.description}),(0,m.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,m.jsx)(l.A,{className:"h-4 w-4"}),(0,m.jsx)("span",{className:B(e.reminderTime)?"text-red-600 font-medium":"",children:z(e.reminderTime)})]}),(0,m.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:e.category})]})]})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[!e.isCompleted&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("button",{onClick:()=>I(e._id,30),className:"p-2 text-yellow-600 hover:text-yellow-800 transition-colors",title:"\u5ef6\u8fdf30\u5206\u949f",children:(0,m.jsx)(l.A,{className:"h-4 w-4"})}),(0,m.jsx)("button",{onClick:()=>L(e._id),className:"p-2 text-green-600 hover:text-green-800 transition-colors",title:"\u6807\u8bb0\u4e3a\u5b8c\u6210",children:(0,m.jsx)(i.A,{className:"h-4 w-4"})})]}),(0,m.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u4e2a\u63d0\u9192\u5417\uff1f"))try{await d.A.deleteReminder(e),T(),S()}catch(t){console.error("\u5220\u9664\u63d0\u9192\u5931\u8d25:",t)}})(e._id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"\u5220\u9664\u63d0\u9192",children:(0,m.jsx)(c.A,{className:"h-4 w-4"})})]})]})},e._id))}),A.total>1&&(0,m.jsx)("div",{className:"flex justify-center mt-6",children:(0,m.jsx)("div",{className:"flex space-x-2",children:Array.from({length:A.total},(e,t)=>t+1).map(e=>(0,m.jsx)("button",{onClick:()=>k((0,a.A)((0,a.A)({},A),{},{current:e})),className:"px-3 py-2 rounded-md transition-colors ".concat(e===A.current?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e},e))})})]})}},16467:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(80045),s=r(9950);const n=["title","titleId"];function i(e,t){let{title:r,titleId:i}=e,l=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},l),r?s.createElement("title",{id:i},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const l=s.forwardRef(i)},48605:(e,t,r)=>{r.d(t,{A:()=>s});var a=r(82715);const s=new class{constructor(){this.apiClient={get:(e,t)=>a.A.get("/reminders".concat(e),t),post:(e,t,r)=>a.A.post("/reminders".concat(e),t,r),put:(e,t,r)=>a.A.put("/reminders".concat(e),t,r),delete:(e,t)=>a.A.delete("/reminders".concat(e),t)}}async getReminders(e){try{const t=await this.apiClient.get("/",{params:e});return t.data||t}catch(a){var t,r;throw new Error((null===(t=a.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"\u83b7\u53d6\u63d0\u9192\u4e8b\u9879\u5931\u8d25")}}async getUpcomingReminders(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24;try{const t=await this.apiClient.get("/upcoming",{params:{hours:e}});return t.data||t}catch(r){var t;throw new Error((null===(t=r.data)||void 0===t?void 0:t.message)||"\u83b7\u53d6\u5373\u5c06\u5230\u6765\u7684\u63d0\u9192\u5931\u8d25")}}async createReminder(e){try{const t=await this.apiClient.post("/",e);return t.data||t}catch(r){var t;throw new Error((null===(t=r.data)||void 0===t?void 0:t.message)||"\u521b\u5efa\u63d0\u9192\u4e8b\u9879\u5931\u8d25")}}async updateReminder(e,t){try{const r=await this.apiClient.put("/".concat(e),t);return r.data||r}catch(a){var r;throw new Error((null===(r=a.data)||void 0===r?void 0:r.message)||"\u66f4\u65b0\u63d0\u9192\u4e8b\u9879\u5931\u8d25")}}async completeReminder(e){try{const t=await this.apiClient.put("/".concat(e,"/complete"));return t.data||t}catch(r){var t;throw new Error((null===(t=r.data)||void 0===t?void 0:t.message)||"\u5b8c\u6210\u63d0\u9192\u5931\u8d25")}}async snoozeReminder(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{const r=await this.apiClient.put("/".concat(e,"/snooze"),{minutes:t});return r.data||r}catch(a){var r;throw new Error((null===(r=a.data)||void 0===r?void 0:r.message)||"\u5ef6\u8fdf\u63d0\u9192\u5931\u8d25")}}async deleteReminder(e){try{const t=await this.apiClient.delete("/".concat(e));return t.data||t}catch(r){var t;throw new Error((null===(t=r.data)||void 0===t?void 0:t.message)||"\u5220\u9664\u63d0\u9192\u4e8b\u9879\u5931\u8d25")}}async getReminderStats(){try{const e=await this.apiClient.get("/stats");return e.data||e}catch(t){var e;throw new Error((null===(e=t.data)||void 0===e?void 0:e.message)||"\u83b7\u53d6\u7edf\u8ba1\u4fe1\u606f\u5931\u8d25")}}}},57491:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(80045),s=r(9950);const n=["title","titleId"];function i(e,t){let{title:r,titleId:i}=e,l=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},l),r?s.createElement("title",{id:i},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const l=s.forwardRef(i)},64725:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(80045),s=r(9950);const n=["title","titleId"];function i(e,t){let{title:r,titleId:i}=e,l=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},l),r?s.createElement("title",{id:i},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const l=s.forwardRef(i)}}]);