"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[413],{3413:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var r=s(89379),l=s(9950),a=s(41435),i=s(82932);const n=e=>i.A.get("/portfolio",{params:e}),o=e=>i.A.post("/portfolio",e,{headers:{"Content-Type":"multipart/form-data"}}),c=(e,t)=>i.A.put("/portfolio/".concat(e),t,{headers:{"Content-Type":"multipart/form-data"}}),d=e=>i.A.delete("/portfolio/".concat(e)),g=e=>i.A.patch("/portfolio/".concat(e,"/view")),x=e=>i.A.patch("/portfolio/".concat(e,"/like"));var u=s(44414);const p=e=>{let{portfolio:t,viewMode:s,onClick:r}=e;const l=t.images.find(e=>e.isMain)||t.images[0],a=e=>{const t={"\u63d2\u753b":"bg-purple-100 text-purple-800","\u8d34\u7eb8":"bg-pink-100 text-pink-800","\u7f16\u7a0b\u9879\u76ee":"bg-blue-100 text-blue-800","\u8bbe\u8ba1\u4f5c\u54c1":"bg-green-100 text-green-800","\u5176\u4ed6":"bg-gray-100 text-gray-800"};return t[e]||t["\u5176\u4ed6"]},i=e=>{const t={"\u5df2\u5b8c\u6210":"bg-green-100 text-green-800","\u8fdb\u884c\u4e2d":"bg-yellow-100 text-yellow-800","\u6682\u505c":"bg-red-100 text-red-800"};return t[e]||t["\u8fdb\u884c\u4e2d"]};return"list"===s?(0,u.jsx)("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow cursor-pointer p-4",onClick:r,children:(0,u.jsxs)("div",{className:"flex gap-4",children:[(0,u.jsx)("div",{className:"flex-shrink-0",children:l?(0,u.jsx)("img",{src:l.url,alt:t.title,className:"w-24 h-24 object-cover rounded-lg"}):(0,u.jsx)("div",{className:"w-24 h-24 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,u.jsx)("span",{className:"text-gray-400 text-sm",children:"\u65e0\u56fe\u7247"})})}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:t.title}),t.featured&&(0,u.jsx)("span",{children:"*"})]}),(0,u.jsx)("p",{className:"text-gray-600 text-sm line-clamp-2 mb-2",children:t.description})]})}),(0,u.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,u.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(a(t.category)),children:t.category}),(0,u.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(i(t.status)),children:t.status}),t.tags.slice(0,3).map((e,t)=>(0,u.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs",children:["#",e]},t)),t.tags.length>3&&(0,u.jsxs)("span",{className:"text-gray-500 text-xs",children:["+",t.tags.length-3]})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"\ud83d\udc41"}),(0,u.jsx)("span",{children:t.viewCount||0})]}),(0,u.jsxs)("div",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{children:"\u2665"}),(0,u.jsx)("span",{children:t.likeCount||0})]}),t.createdAt&&(0,u.jsx)("span",{children:new Date(t.createdAt).toLocaleDateString()})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[t.projectUrl&&(0,u.jsx)("a",{href:t.projectUrl,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"text-blue-500 hover:text-blue-600 transition-colors",title:"\u67e5\u770b\u9879\u76ee",children:(0,u.jsx)("span",{children:"\u2197"})}),t.githubUrl&&(0,u.jsx)("a",{href:t.githubUrl,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"text-gray-600 hover:text-gray-800 transition-colors",title:"\u67e5\u770b\u4ee3\u7801",children:(0,u.jsx)("span",{children:"\u26a1"})})]})]})]})]})}):(0,u.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow cursor-pointer overflow-hidden group",onClick:r,children:[(0,u.jsxs)("div",{className:"relative aspect-video bg-gray-200",children:[l?(0,u.jsx)("img",{src:l.url,alt:t.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):(0,u.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,u.jsx)("span",{className:"text-gray-400",children:"\u65e0\u56fe\u7247"})}),t.featured&&(0,u.jsx)("div",{className:"absolute top-2 right-2",children:(0,u.jsx)("span",{children:"*"})}),(0,u.jsx)("div",{className:"absolute top-2 left-2",children:(0,u.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(i(t.status)),children:t.status})}),(0,u.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100",children:(0,u.jsxs)("div",{className:"flex gap-2",children:[t.projectUrl&&(0,u.jsx)("a",{href:t.projectUrl,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"bg-white bg-opacity-90 hover:bg-opacity-100 text-gray-800 p-2 rounded-full transition-all",title:"\u67e5\u770b\u9879\u76ee",children:(0,u.jsx)("span",{children:"\u2197"})}),t.githubUrl&&(0,u.jsx)("a",{href:t.githubUrl,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"bg-white bg-opacity-90 hover:bg-opacity-100 text-gray-800 p-2 rounded-full transition-all",title:"\u67e5\u770b\u4ee3\u7801",children:(0,u.jsx)("span",{children:"\u26a1"})})]})})]}),(0,u.jsxs)("div",{className:"p-4",children:[(0,u.jsxs)("div",{className:"mb-2",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1 line-clamp-1",children:t.title}),(0,u.jsx)("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium ".concat(a(t.category)),children:t.category})]}),(0,u.jsx)("p",{className:"text-gray-600 text-sm line-clamp-2 mb-3",children:t.description}),t.tags.length>0&&(0,u.jsxs)("div",{className:"flex flex-wrap gap-1 mb-3",children:[t.tags.slice(0,3).map((e,t)=>(0,u.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs",children:["#",e]},t)),t.tags.length>3&&(0,u.jsxs)("span",{className:"text-gray-500 text-xs self-center",children:["+",t.tags.length-3]})]}),t.technologies&&t.technologies.length>0&&(0,u.jsxs)("div",{className:"flex flex-wrap gap-1 mb-3",children:[t.technologies.slice(0,3).map((e,t)=>(0,u.jsx)("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs",children:e},t)),t.technologies.length>3&&(0,u.jsxs)("span",{className:"text-gray-500 text-xs self-center",children:["+",t.technologies.length-3]})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsxs)("div",{className:"flex items-center gap-1",children:["\ud83d\udc41",(0,u.jsx)("span",{children:t.viewCount||0})]}),(0,u.jsxs)("div",{className:"flex items-center gap-1",children:["\u2665",(0,u.jsx)("span",{children:t.likeCount||0})]})]}),t.createdAt&&(0,u.jsx)("span",{children:new Date(t.createdAt).toLocaleDateString()})]})]})]})},h=e=>{var t,s,a;let{portfolio:i,onClose:n,onSave:g}=e;const[p,h]=(0,l.useState)(!i),[m,b]=(0,l.useState)(!1),[f,j]=(0,l.useState)(null),[v,y]=(0,l.useState)({title:"",description:"",category:"\u63d2\u753b",tags:[],images:[],projectUrl:"",githubUrl:"",technologies:[],status:"\u8fdb\u884c\u4e2d",featured:!1}),[N,w]=(0,l.useState)(""),[k,C]=(0,l.useState)(""),[A,U]=(0,l.useState)([]),[S,_]=(0,l.useState)([]);(0,l.useEffect)(()=>{i&&y({title:i.title||"",description:i.description||"",category:i.category||"\u63d2\u753b",tags:i.tags||[],images:i.images||[],projectUrl:i.projectUrl||"",githubUrl:i.githubUrl||"",technologies:i.technologies||[],status:i.status||"\u8fdb\u884c\u4e2d",featured:i.featured||!1})},[i]);const E=(e,t)=>{y(s=>(0,r.A)((0,r.A)({},s),{},{[e]:t}))},M=()=>{var e;!N.trim()||null!==(e=v.tags)&&void 0!==e&&e.includes(N.trim())||(E("tags",[...v.tags||[],N.trim()]),w(""))},D=()=>{var e;!k.trim()||null!==(e=v.technologies)&&void 0!==e&&e.includes(k.trim())||(E("technologies",[...v.technologies||[],k.trim()]),C(""))},P=e=>{const t=Array.from(e.target.files||[]);U(e=>[...e,...t]),t.forEach(e=>{const t=new FileReader;t.onload=e=>{_(t=>{var s;return[...t,null===(s=e.target)||void 0===s?void 0:s.result]})},t.readAsDataURL(e)})},F=function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){var t;const s=(null===(t=v.images)||void 0===t?void 0:t.filter((t,s)=>s!==e))||[];E("images",s)}else{const t=A.filter((t,s)=>s!==e),s=S.filter((t,s)=>s!==e);U(t),_(s)}},L=async()=>{try{var e,t;if(b(!0),j(null),null===(e=v.title)||void 0===e||!e.trim())return void j("\u8bf7\u8f93\u5165\u4f5c\u54c1\u6807\u9898");if(null===(t=v.description)||void 0===t||!t.trim())return void j("\u8bf7\u8f93\u5165\u4f5c\u54c1\u63cf\u8ff0");const s=new FormData;let r;s.append("title",v.title.trim()),s.append("description",v.description.trim()),s.append("category",v.category||"\u63d2\u753b"),s.append("status",v.status||"\u8fdb\u884c\u4e2d"),s.append("featured",String(v.featured||!1)),v.projectUrl&&s.append("projectUrl",v.projectUrl),v.githubUrl&&s.append("githubUrl",v.githubUrl),(v.tags||[]).forEach(e=>{s.append("tags[]",e)}),(v.technologies||[]).forEach(e=>{s.append("technologies[]",e)}),v.images&&v.images.length>0&&s.append("existingImages",JSON.stringify(v.images)),A.forEach((e,t)=>{s.append("images",e),s.append("imageCaption_".concat(t),""),s.append("imageIsMain_".concat(t),String(0===t&&(!v.images||0===v.images.length)))}),r=null!==i&&void 0!==i&&i._id?await c(i._id,s):await o(s),r.success?g():j(r.message||"\u4fdd\u5b58\u5931\u8d25")}catch(s){j("\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"),console.error("Error saving portfolio:",s)}finally{b(!1)}};return(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,u.jsxs)("div",{className:"flex items-center gap-4",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:i?p?"\u7f16\u8f91\u4f5c\u54c1":"\u4f5c\u54c1\u8be6\u60c5":"\u521b\u5efa\u4f5c\u54c1"}),i&&!p&&(0,u.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,u.jsxs)("div",{className:"flex items-center gap-1",children:["\ud83d\udc41\ufe0f",(0,u.jsx)("span",{children:i.viewCount||0})]}),(0,u.jsxs)("button",{onClick:async()=>{if(null!==i&&void 0!==i&&i._id)try{const e=await x(i._id);e.success&&y(t=>(0,r.A)((0,r.A)({},t),{},{likeCount:e.data.likeCount}))}catch(e){console.error("Error toggling like:",e)}},className:"flex items-center gap-1 hover:text-red-500 transition-colors",children:["\u2764\ufe0f",(0,u.jsx)("span",{children:v.likeCount||0})]})]})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[i&&(0,u.jsxs)(u.Fragment,{children:[p?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{onClick:()=>h(!1),className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"\u53d6\u6d88"}),(0,u.jsx)("button",{onClick:L,disabled:m,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors disabled:opacity-50",children:m?"\u4fdd\u5b58\u4e2d...":"\u4fdd\u5b58"})]}):(0,u.jsx)("button",{onClick:()=>h(!0),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors",children:"\u7f16\u8f91"}),(0,u.jsx)("button",{onClick:async()=>{if(null!==i&&void 0!==i&&i._id&&window.confirm("\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u4e2a\u4f5c\u54c1\u5417\uff1f\u6b64\u64cd\u4f5c\u4e0d\u53ef\u64a4\u9500\u3002"))try{b(!0);const e=await d(i._id);e.success?g():j(e.message||"\u5220\u9664\u5931\u8d25")}catch(e){j("\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"),console.error("Error deleting portfolio:",e)}finally{b(!1)}},disabled:m,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors disabled:opacity-50",children:"\u5220\u9664"})]}),!i&&(0,u.jsx)("button",{onClick:L,disabled:m,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors disabled:opacity-50",children:m?"\u521b\u5efa\u4e2d...":"\u521b\u5efa"}),(0,u.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 transition-colors",children:"\u2715"})]})]}),f&&(0,u.jsx)("div",{className:"mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,u.jsx)("div",{className:"text-red-800",children:f})}),(0,u.jsxs)("div",{className:"p-6 space-y-6",children:[(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u4f5c\u54c1\u6807\u9898 *"}),p?(0,u.jsx)("input",{type:"text",value:v.title,onChange:e=>E("title",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u8f93\u5165\u4f5c\u54c1\u6807\u9898"}):(0,u.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:v.title})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u5206\u7c7b"}),p?(0,u.jsxs)("select",{value:v.category,onChange:e=>E("category",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,u.jsx)("option",{value:"\u63d2\u753b",children:"\u63d2\u753b"}),(0,u.jsx)("option",{value:"\u8d34\u7eb8",children:"\u8d34\u7eb8"}),(0,u.jsx)("option",{value:"\u7f16\u7a0b\u9879\u76ee",children:"\u7f16\u7a0b\u9879\u76ee"}),(0,u.jsx)("option",{value:"\u8bbe\u8ba1\u4f5c\u54c1",children:"\u8bbe\u8ba1\u4f5c\u54c1"}),(0,u.jsx)("option",{value:"\u5176\u4ed6",children:"\u5176\u4ed6"})]}):(0,u.jsx)("div",{className:"text-gray-900",children:v.category})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u4f5c\u54c1\u63cf\u8ff0 *"}),p?(0,u.jsx)("textarea",{value:v.description,onChange:e=>E("description",e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u63cf\u8ff0\u4f60\u7684\u4f5c\u54c1..."}):(0,u.jsx)("div",{className:"text-gray-900 whitespace-pre-wrap",children:v.description})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u72b6\u6001"}),p?(0,u.jsxs)("select",{value:v.status,onChange:e=>E("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,u.jsx)("option",{value:"\u8fdb\u884c\u4e2d",children:"\u8fdb\u884c\u4e2d"}),(0,u.jsx)("option",{value:"\u5df2\u5b8c\u6210",children:"\u5df2\u5b8c\u6210"}),(0,u.jsx)("option",{value:"\u6682\u505c",children:"\u6682\u505c"})]}):(0,u.jsx)("div",{className:"text-gray-900",children:v.status})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u7cbe\u9009\u4f5c\u54c1"}),p?(0,u.jsxs)("label",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",checked:v.featured,onChange:e=>E("featured",e.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),(0,u.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"\u8bbe\u4e3a\u7cbe\u9009\u4f5c\u54c1"})]}):(0,u.jsx)("div",{className:"text-gray-900",children:v.featured?"\u662f":"\u5426"})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u9879\u76ee\u94fe\u63a5"}),p?(0,u.jsx)("input",{type:"url",value:v.projectUrl,onChange:e=>E("projectUrl",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://..."}):v.projectUrl?(0,u.jsx)("a",{href:v.projectUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 flex items-center gap-1",children:"\ud83d\udd17 \u67e5\u770b\u9879\u76ee"}):(0,u.jsx)("div",{className:"text-gray-500",children:"\u65e0"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GitHub \u94fe\u63a5"}),p?(0,u.jsx)("input",{type:"url",value:v.githubUrl,onChange:e=>E("githubUrl",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://github.com/..."}):v.githubUrl?(0,u.jsx)("a",{href:v.githubUrl,target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-gray-800 flex items-center gap-1",children:"\ud83d\udcc1 \u67e5\u770b\u4ee3\u7801"}):(0,u.jsx)("div",{className:"text-gray-500",children:"\u65e0"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u6807\u7b7e"}),(0,u.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:null===(t=v.tags)||void 0===t?void 0:t.map((e,t)=>(0,u.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm",children:["#",e,p&&(0,u.jsx)("button",{onClick:()=>(e=>{var t;E("tags",(null===(t=v.tags)||void 0===t?void 0:t.filter(t=>t!==e))||[])})(e),className:"text-gray-500 hover:text-red-500 transition-colors",children:"\u2715"})]},t))}),p&&(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("input",{type:"text",value:N,onChange:e=>w(e.target.value),onKeyPress:e=>"Enter"===e.key&&M(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u6dfb\u52a0\u6807\u7b7e"}),(0,u.jsx)("button",{onClick:M,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"\u6dfb\u52a0"})]})]}),("\u7f16\u7a0b\u9879\u76ee"===v.category||(null===(s=v.technologies)||void 0===s?void 0:s.length))&&(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u6280\u672f\u6808"}),(0,u.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:null===(a=v.technologies)||void 0===a?void 0:a.map((e,t)=>(0,u.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-50 text-blue-700 rounded text-sm",children:[e,p&&(0,u.jsx)("button",{onClick:()=>(e=>{var t;E("technologies",(null===(t=v.technologies)||void 0===t?void 0:t.filter(t=>t!==e))||[])})(e),className:"text-blue-500 hover:text-red-500 transition-colors",children:"\u2715"})]},t))}),p&&(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("input",{type:"text",value:k,onChange:e=>C(e.target.value),onKeyPress:e=>"Enter"===e.key&&D(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u6dfb\u52a0\u6280\u672f"}),(0,u.jsx)("button",{onClick:D,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"\u6dfb\u52a0"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u4f5c\u54c1\u56fe\u7247"}),(()=>{const e=v.images||[];return(0,u.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.map((e,t)=>(0,u.jsxs)("div",{className:"relative group",children:[(0,u.jsx)("img",{src:e.url,alt:e.caption||v.title,className:"w-full h-32 object-cover rounded-lg"}),e.isMain&&(0,u.jsx)("div",{className:"absolute top-2 left-2 bg-yellow-500 text-white px-2 py-1 rounded text-xs",children:"\u4e3b\u56fe"}),p&&(0,u.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100",children:(0,u.jsxs)("div",{className:"flex gap-2",children:[!e.isMain&&(0,u.jsx)("button",{onClick:()=>function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){var t;const s=(null===(t=v.images)||void 0===t?void 0:t.map((t,s)=>(0,r.A)((0,r.A)({},t),{},{isMain:s===e})))||[];E("images",s)}}(t,!0),className:"bg-yellow-500 text-white p-2 rounded-full hover:bg-yellow-600 transition-colors",title:"\u8bbe\u4e3a\u4e3b\u56fe",children:"\u2b50"}),(0,u.jsx)("button",{onClick:()=>F(t,!0),className:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition-colors",title:"\u5220\u9664\u56fe\u7247",children:"\ud83d\uddd1\ufe0f"})]})})]},"existing-".concat(t))),S.map((e,t)=>(0,u.jsxs)("div",{className:"relative group",children:[(0,u.jsx)("img",{src:e,alt:"\u65b0\u4e0a\u4f20",className:"w-full h-32 object-cover rounded-lg"}),(0,u.jsx)("div",{className:"absolute top-2 left-2 bg-blue-500 text-white px-2 py-1 rounded text-xs",children:"\u65b0\u56fe\u7247"}),(0,u.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100",children:(0,u.jsx)("button",{onClick:()=>F(t,!1),className:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition-colors",title:"\u5220\u9664\u56fe\u7247",children:"\ud83d\uddd1\ufe0f"})})]},"new-".concat(t))),p&&(0,u.jsxs)("label",{className:"border-2 border-dashed border-gray-300 rounded-lg h-32 flex flex-col items-center justify-center cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[(0,u.jsx)("span",{className:"text-2xl text-gray-400 mb-2",children:"\ud83d\udcc1"}),(0,u.jsx)("span",{className:"text-sm text-gray-500",children:"\u4e0a\u4f20\u56fe\u7247"}),(0,u.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:P,className:"hidden"})]})]})})()]})]})]})})},m=()=>{const[e,t]=(0,l.useState)([]),[s,i]=(0,l.useState)(!0),[o,c]=(0,l.useState)(null),[d,x]=(0,l.useState)(null),[m,b]=(0,l.useState)(!1),[f,j]=(0,l.useState)("grid"),[v,y]=(0,l.useState)({page:1,limit:12,category:"",search:"",featured:void 0,status:""}),[N,w]=(0,l.useState)({current:1,pageSize:12,total:0,pages:0}),k=(0,l.useCallback)(async()=>{try{i(!0),c(null);const e=(0,r.A)((0,r.A)({},v),{},{category:"\u5168\u90e8"===v.category?"":v.category,status:"\u5168\u90e8"===v.status?"":v.status}),s=await n(e);s.success?(t(s.data),s.pagination&&w(s.pagination)):c(s.message||"\u83b7\u53d6\u4f5c\u54c1\u5217\u8868\u5931\u8d25")}catch(e){c("\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"),console.error("Error fetching portfolios:",e)}finally{i(!1)}},[v]);(0,l.useEffect)(()=>{k()},[k]);const C=e=>{y(t=>(0,r.A)((0,r.A)({},t),{},{page:e}))},A=()=>{x(null),b(!0)},U=()=>{b(!1),x(null)};return(0,u.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,u.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,u.jsxs)("div",{className:"py-6",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,u.jsx)(a.A,{className:"h-8 w-8 mr-3 text-primary-600"}),"\u4f5c\u54c1\u96c6"]}),(0,u.jsx)("p",{className:"text-gray-600 mt-1",children:"\u5c55\u793a\u6211\u7684\u521b\u4f5c\u4f5c\u54c1\u548c\u9879\u76ee"})]}),(0,u.jsxs)("button",{onClick:A,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[(0,u.jsx)("span",{children:"+"}),"\u6dfb\u52a0\u4f5c\u54c1"]})]}),(0,u.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[(0,u.jsxs)("div",{className:"relative flex-1",children:[(0,u.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:"\ud83d\udd0d"}),(0,u.jsx)("input",{type:"text",placeholder:"\u641c\u7d22\u4f5c\u54c1\u6807\u9898\u3001\u63cf\u8ff0\u6216\u6807\u7b7e...",value:v.search,onChange:e=>{return t=e.target.value,void y(e=>(0,r.A)((0,r.A)({},e),{},{search:t,page:1}));var t},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,u.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,u.jsx)("select",{value:v.category||"\u5168\u90e8",onChange:e=>{return t=e.target.value,void y(e=>(0,r.A)((0,r.A)({},e),{},{category:t,page:1}));var t},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:["\u5168\u90e8","\u63d2\u753b","\u8d34\u7eb8","\u7f16\u7a0b\u9879\u76ee","\u8bbe\u8ba1\u4f5c\u54c1","\u5176\u4ed6"].map(e=>(0,u.jsx)("option",{value:e,children:e},e))}),(0,u.jsx)("select",{value:v.status||"\u5168\u90e8",onChange:e=>{return t=e.target.value,void y(e=>(0,r.A)((0,r.A)({},e),{},{status:t,page:1}));var t},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:["\u5168\u90e8","\u5df2\u5b8c\u6210","\u8fdb\u884c\u4e2d","\u6682\u505c"].map(e=>(0,u.jsx)("option",{value:e,children:e},e))}),(0,u.jsxs)("button",{onClick:()=>{y(e=>(0,r.A)((0,r.A)({},e),{},{featured:void 0===e.featured||!e.featured&&void 0,page:1}))},className:"px-3 py-2 rounded-lg border transition-colors ".concat(!0===v.featured?"bg-yellow-100 border-yellow-300 text-yellow-800":!1===v.featured?"bg-gray-100 border-gray-300 text-gray-600":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"),children:[(0,u.jsx)("span",{className:"inline mr-1",children:"\ud83d\udd3d"}),!0===v.featured?"\u4ec5\u7cbe\u9009":!1===v.featured?"\u975e\u7cbe\u9009":"\u5168\u90e8"]}),(0,u.jsxs)("div",{className:"flex border border-gray-300 rounded-lg overflow-hidden",children:[(0,u.jsx)("button",{onClick:()=>j("grid"),className:"px-3 py-2 ".concat("grid"===f?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"\u229e"}),(0,u.jsx)("button",{onClick:()=>j("list"),className:"px-3 py-2 ".concat("list"===f?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"\u2630"})]})]})]})]})})}),(0,u.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s?(0,u.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,u.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):o?(0,u.jsxs)("div",{className:"text-center py-12",children:[(0,u.jsx)("div",{className:"text-red-500 text-lg mb-4",children:o}),(0,u.jsx)("button",{onClick:k,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors",children:"\u91cd\u8bd5"})]}):0===e.length?(0,u.jsxs)("div",{className:"text-center py-12",children:[(0,u.jsx)("div",{className:"text-gray-500 text-lg mb-4",children:"\u6682\u65e0\u4f5c\u54c1"}),(0,u.jsx)("button",{onClick:A,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors",children:"\u521b\u5efa\u7b2c\u4e00\u4e2a\u4f5c\u54c1"})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"".concat("grid"===f?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4"),children:e.map(e=>(0,u.jsx)(p,{portfolio:e,viewMode:f,onClick:()=>(e=>{x(e),b(!0),e._id&&g(e._id).catch(console.error)})(e)},e._id))}),(()=>{if(N.pages<=1)return null;const e=[];for(let t=1;t<=N.pages;t++)e.push((0,u.jsx)("button",{onClick:()=>C(t),className:"px-3 py-1 mx-1 rounded ".concat(t===N.current?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:t},t));return(0,u.jsxs)("div",{className:"flex justify-center items-center mt-8",children:[(0,u.jsx)("button",{onClick:()=>C(N.current-1),disabled:1===N.current,className:"px-3 py-1 mx-1 rounded bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"\u4e0a\u4e00\u9875"}),e,(0,u.jsx)("button",{onClick:()=>C(N.current+1),disabled:N.current===N.pages,className:"px-3 py-1 mx-1 rounded bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"\u4e0b\u4e00\u9875"})]})})()]})}),m&&(0,u.jsx)(h,{portfolio:d,onClose:U,onSave:()=>{k(),U()}})]})}},41435:(e,t,s)=>{s.d(t,{A:()=>n});var r=s(80045),l=s(9950);const a=["title","titleId"];function i(e,t){let{title:s,titleId:i}=e,n=(0,r.A)(e,a);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},n),s?l.createElement("title",{id:i},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const n=l.forwardRef(i)}}]);